{"ast":null,"code":"var _jsxFileName = \"D:\\\\blogspot\\\\frontend\\\\src\\\\pages\\\\PostDetail.js\",\n  _s = $RefreshSig$();\n// frontend/src/pages/PostDetail.js\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PostDetail() {\n  _s();\n  var _post$author, _post$likes, _post$comments;\n  const {\n    id\n  } = useParams();\n  const [post, setPost] = useState(null);\n  const [text, setText] = useState('');\n  useEffect(() => {\n    fetch();\n  }, [id]);\n  async function fetch() {\n    try {\n      const res = await axios.get('http://localhost:5000/api/posts/' + id);\n      setPost(res.data);\n    } catch (e) {\n      console.error(e);\n    }\n  }\n  async function like() {\n    const token = localStorage.getItem('token');\n    await axios.post(`http://localhost:5000/api/posts/${id}/like`, {}, {\n      headers: {\n        Authorization: 'Bearer ' + token\n      }\n    });\n    fetch();\n  }\n  async function comment() {\n    if (!text) return;\n    const token = localStorage.getItem('token');\n    await axios.post(`http://localhost:5000/api/posts/${id}/comment`, {\n      text\n    }, {\n      headers: {\n        Authorization: 'Bearer ' + token\n      }\n    });\n    setText('');\n    fetch();\n  }\n  if (!post) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 20\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    style: {\n      maxWidth: 900,\n      margin: '16px auto'\n    },\n    children: [post.image && /*#__PURE__*/_jsxDEV(\"img\", {\n      src: post.image,\n      alt: \"\",\n      style: {\n        width: '100%',\n        height: 320,\n        objectFit: 'cover',\n        borderRadius: 8\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 22\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        marginTop: 12\n      },\n      children: post.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: '#64748b',\n        fontSize: 13\n      },\n      children: [(_post$author = post.author) === null || _post$author === void 0 ? void 0 : _post$author.name, \" \\xB7 \", new Date(post.createdAt).toLocaleDateString()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 12\n      },\n      dangerouslySetInnerHTML: {\n        __html: post.content\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 16,\n        display: 'flex',\n        gap: 10\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn\",\n        onClick: like,\n        children: [\"Like (\", ((_post$likes = post.likes) === null || _post$likes === void 0 ? void 0 : _post$likes.length) || 0, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 18\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Comments\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 8\n        },\n        children: (_post$comments = post.comments) === null || _post$comments === void 0 ? void 0 : _post$comments.map(c => {\n          var _c$user;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: 10,\n              background: '#f8fafc',\n              borderRadius: 8,\n              marginBottom: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: 600\n              },\n              children: ((_c$user = c.user) === null || _c$user === void 0 ? void 0 : _c$user.name) || 'User'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: 6\n              },\n              children: c.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 12,\n                color: '#64748b',\n                marginTop: 6\n              },\n              children: new Date(c.createdAt).toLocaleString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 13\n            }, this)]\n          }, c._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 11\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: 8,\n          marginTop: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          value: text,\n          onChange: e => setText(e.target.value),\n          placeholder: \"Write a comment...\",\n          className: \"input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          onClick: comment,\n          children: \"Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }, this);\n}\n_s(PostDetail, \"tm+8c8jzv9Txl/8KWiEJOCy+OYA=\", false, function () {\n  return [useParams];\n});\n_c = PostDetail;\nvar _c;\n$RefreshReg$(_c, \"PostDetail\");","map":{"version":3,"names":["React","useEffect","useState","axios","useParams","jsxDEV","_jsxDEV","PostDetail","_s","_post$author","_post$likes","_post$comments","id","post","setPost","text","setText","fetch","res","get","data","e","console","error","like","token","localStorage","getItem","headers","Authorization","comment","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","maxWidth","margin","image","src","alt","width","height","objectFit","borderRadius","marginTop","title","color","fontSize","author","name","Date","createdAt","toLocaleDateString","dangerouslySetInnerHTML","__html","content","display","gap","onClick","likes","length","comments","map","c","_c$user","padding","background","marginBottom","fontWeight","user","toLocaleString","_id","value","onChange","target","placeholder","_c","$RefreshReg$"],"sources":["D:/blogspot/frontend/src/pages/PostDetail.js"],"sourcesContent":["// frontend/src/pages/PostDetail.js\r\nimport React, {useEffect, useState} from 'react';\r\nimport axios from 'axios';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nexport default function PostDetail(){\r\n  const { id } = useParams();\r\n  const [post,setPost] = useState(null);\r\n  const [text,setText] = useState('');\r\n\r\n  useEffect(()=>{ fetch(); },[id]);\r\n\r\n  async function fetch(){\r\n    try{\r\n      const res = await axios.get('http://localhost:5000/api/posts/'+id);\r\n      setPost(res.data);\r\n    }catch(e){ console.error(e); }\r\n  }\r\n\r\n  async function like(){\r\n    const token = localStorage.getItem('token');\r\n    await axios.post(`http://localhost:5000/api/posts/${id}/like`, {}, { headers: { Authorization: 'Bearer ' + token } });\r\n    fetch();\r\n  }\r\n\r\n  async function comment(){\r\n    if(!text) return;\r\n    const token = localStorage.getItem('token');\r\n    await axios.post(`http://localhost:5000/api/posts/${id}/comment`, { text }, { headers: { Authorization: 'Bearer ' + token } });\r\n    setText(''); fetch();\r\n  }\r\n\r\n  if(!post) return <div className=\"card\">Loading...</div>;\r\n  return (\r\n    <div className=\"card\" style={{maxWidth:900,margin:'16px auto'}}>\r\n      {post.image && <img src={post.image} alt=\"\" style={{width:'100%',height:320,objectFit:'cover',borderRadius:8}} />}\r\n      <h1 style={{marginTop:12}}>{post.title}</h1>\r\n      <div style={{color:'#64748b',fontSize:13}}>{post.author?.name} Â· {new Date(post.createdAt).toLocaleDateString()}</div>\r\n      <div style={{marginTop:12}} dangerouslySetInnerHTML={{__html: post.content}} />\r\n      <div style={{marginTop:16,display:'flex',gap:10}}>\r\n        <button className=\"btn\" onClick={like}>Like ({post.likes?.length || 0})</button>\r\n      </div>\r\n\r\n      <div style={{marginTop:18}}>\r\n        <h3>Comments</h3>\r\n        <div style={{marginTop:8}}>{post.comments?.map(c => (\r\n          <div key={c._id} style={{padding:10,background:'#f8fafc',borderRadius:8,marginBottom:8}}>\r\n            <div style={{fontWeight:600}}>{c.user?.name || 'User'}</div>\r\n            <div style={{marginTop:6}}>{c.text}</div>\r\n            <div style={{fontSize:12,color:'#64748b',marginTop:6}}>{new Date(c.createdAt).toLocaleString()}</div>\r\n          </div>\r\n        ))}</div>\r\n\r\n        <div style={{display:'flex',gap:8,marginTop:8}}>\r\n          <input value={text} onChange={e=>setText(e.target.value)} placeholder=\"Write a comment...\" className=\"input\" />\r\n          <button className=\"btn\" onClick={comment}>Post</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}